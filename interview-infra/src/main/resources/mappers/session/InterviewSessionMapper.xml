<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.deepknow.goodface.interview.repo.mapper.InterviewSessionMapper">

  <resultMap id="InterviewSessionMap" type="com.deepknow.goodface.interview.domain.session.model.InterviewSession">
    <id column="id" property="id"/>
    <result column="user_id" property="userId"/>
    <result column="status" property="status"/>
    <result column="start_time" property="startTime"/>
    <result column="end_time" property="endTime"/>
    <result column="config_json" property="configJson"/>
  </resultMap>

  <sql id="Base_Column_List">
    id, user_id, status, start_time, end_time, config_json
  </sql>

  <insert id="insert" parameterType="com.deepknow.goodface.interview.domain.session.model.InterviewSession">
    INSERT INTO interview_session (id, user_id, status, start_time, end_time, config_json)
    VALUES (#{id}, #{userId}, #{status}, #{startTime}, #{endTime}, #{configJson})
  </insert>

  <select id="findById" parameterType="string" resultMap="InterviewSessionMap">
    SELECT <include refid="Base_Column_List"/>
    FROM interview_session
    WHERE id = #{id}
  </select>

  <update id="updateStatus">
    UPDATE interview_session SET status = #{status}, end_time = #{endTime}
    WHERE id = #{id}
  </update>

</mapper>